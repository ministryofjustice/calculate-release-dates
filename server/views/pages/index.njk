{% extends "../partials/layout.njk" %}
{% from "govuk/components/button/macro.njk" import govukButton %}

{% set pageTitle = applicationName + " - Home" %}
{% set pageId = "index" %}

{% block aside %}
    {% include "../../views/pages/partials/prisonerIdentityBar.njk" %}
{% endblock %}

{% block content %}
    <div class="govuk-grid-row">
        <div class="govuk-grid-column-full">
            <h1 class="govuk-heading-xl" data-qa="main-heading" id="main-heading">
                Calculate release dates
            </h1>
            <p class="govuk-body">Automatically calculate a prisonerâ€™s release dates using information from NOMIS.<br/>
            </p>
            <h2 class="govuk-heading-m">Before you start</h2>
        <p>
            Check in NOMIS that the prisoners information includes:
            <ul class="govuk-list govuk-list--bullet">
                <li>court case information</li>
                <li>offence information</li>
                <li>sentences</li>
                <li>adjustments</li>
            </ul>
        </p>
            <p class="govuk-body">

            </p>
            {% if prisonId %}
                {% set startlink = "/calculation/" + prisonId + "/alternative-release-arrangements" %}
            {% else %}
                {% set startlink = "/search/prisoners" %}
            {% endif %}
            {{ govukButton({
                text: "Start now",
                href: startlink,
                classes: "govuk-!-margin-top-2 govuk-!-margin-bottom-8",
                isStartButton: true,
                attributes: { 'data-qa': 'start-now-button', 'aria-describedby': 'main-heading'}
            }) }}

            <h2 class="govuk-heading-m" id="look-up-heading">Look up previous calculations</h2>
            <p>You can view previous calculations using the calculation lookup service</p>
            {% if prisonId %}
                {% set viewlink = "/view/" + prisonId + "/latest"  %}
            {% else %}
                {% set viewlink = "/view/search/prisoners"  %}
            {% endif %}

            {{ govukButton({
                text: "Look up calculations",
                href: viewlink,
                classes: "govuk-!-margin-top-2 govuk-!-margin-bottom-8",
                isStartButton: true,
                attributes: { 'data-qa': 'view-journey-start', 'aria-describedby': 'look-up-heading'}
            }) }}

            {% if allowBulkLoad %}
                <p class="govuk-body">
                    To perform bulk analysis of previous calculations you may use the
                    <a data-qa="bulk-comparison-start" href="{{ "/compare" }}">bulk comparison tool.</a>
                </p>
            {% endif %}

        </div>
    </div>
{% endblock %}