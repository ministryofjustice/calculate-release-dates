{% extends "../../partials/layout.njk" %}

{% from "govuk/components/table/macro.njk" import govukTable %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/back-link/macro.njk" import govukBackLink %}

{% set pageTitle = applicationName + " - calculation summary" %}
{% block beforeContent %}
    {% include "../partials/phaseBanner.njk" %}
    {% include "../partials/prisonerIdentityBar.njk" %}
    {{ govukBackLink({
        text: "Back",
        href: "/calculation/" + prisonerDetail.offenderNo + "/check-information"
    }) }}
{% endblock %}

{% block content %}
    {% include "../partials/formError.njk" %}
    <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">
            <h1 class="govuk-heading-xl">Review calculation before submitting</h1>
            <div class="govuk-inset-text">
                Some dates and details are not included as according to <a
                        href="http://www.justice.gov.uk/downloads/offenders/psipso/psi-2015/psi-03-2015-sentence-calculation-determiante-sentenced-prisoners.pdf"
                        target="_blank">PSI 03/2015 (opens in new tab)</a> they are not relevant to this person's circumstances.
            </div>
            <h2 class="govuk-heading-l govuk-!-margin-top-9">Final release dates</h2>
            <div class="custom-card">
                <div class="custom-card-main">
                    {% if releaseDates.SLED %}
                        <h3 class="govuk-heading-s">Sentence and licence expiry date (SLED)</h3>
                        <p class="govuk-body">{{ releaseDates.SLED | date('dddd, DD MMMM YYYY') }}</p>
                    {% endif %}
                    {% if releaseDates.LED %}
                        <h3 class="govuk-heading-s">Licence expiry date (LED)</h3>
                        <p class="govuk-body">{{ releaseDates.LED | date('dddd, DD MMMM YYYY') }}</p>
                    {% endif %}
                    {% if releaseDates.SED %}
                        <h3 class="govuk-heading-s">Sentence expiry date (SED)</h3>
                        <p class="govuk-body">{{ releaseDates.SED | date('dddd, DD MMMM YYYY') }}</p>
                    {% endif %}
                    {% if releaseDates.NPD %}
                        <h3 class="govuk-heading-s">Non parole date (NPD)</h3>
                        <p class="govuk-body">{{ releaseDates.NPD | date('dddd, DD MMMM YYYY') }}</p>
                    {% endif %}
                    {% if releaseDates.ARD %}
                        <h3 class="govuk-heading-s">Automatic release date (ARD)</h3>
                        <p class="govuk-body">{{ releaseDates.NPD | date('dddd, DD MMMM YYYY') }}</p>
                    {% endif %}
                    {% if releaseDates.CRD %}
                        <h3 class="govuk-heading-s">Conditional release date (CRD)</h3>
                        <p class="govuk-body">{{ releaseDates.CRD | date('dddd, DD MMMM YYYY') }}</p>
                    {% endif %}
                    {% if releaseDates.TUSED %}
                        <h3 class="govuk-heading-s">Top up supervision end date (TUSED)</h3>
                        <p class="govuk-body">{{ releaseDates.TUSED | date('dddd, DD MMMM YYYY') }}</p>
                    {% endif %}
                    {% if releaseDates.PED %}
                        <h3 class="govuk-heading-s">Parole eligibility date (PED)</h3>
                        <p class="govuk-body">{{ releaseDates.PED | date('dddd, DD MMMM YYYY') }}</p>
                    {% endif %}
                    {% if releaseDates.HDCED %}
                        <h3 class="govuk-heading-s">Home detention curfew eligibility date (HDCED)</h3>
                        <p class="govuk-body">{{ releaseDates.HDCED | date('dddd, DD MMMM YYYY') }}</p>
                    {% endif %}
                </div>
            </div>
            <p class="govuk-body"><a href="#">Report a problem with this calculation</a></p>
            <h3 class="govuk-heading-m govuk-!-margin-top-9">Confirm and submit to NOMIS</h3>
            <p class="govuk-body">By submitting this calculation you are confirming that, to the best of your knowledge,
                it is correct. The calculation will be saved in NOMIS.</p>
            <form method="post">
                <input type="hidden" name="_csrf" value="{{ csrfToken }}" />
                {{ govukButton({
                    text: "Confirm and submit",
                    type: submit,
                    value: 'confirm-and-submit',
                    preventDoubleClick: true
                }) }}
            </form>
            <p class="govuk-body govuk-!-font-size-16"><a href={{ "/calculation/" + prisonerDetail.offenderNo +
                "/check-information" }} class="govuk-link">Cancel calculation</a></p>
        </div>
    </div>
{% endblock %}
