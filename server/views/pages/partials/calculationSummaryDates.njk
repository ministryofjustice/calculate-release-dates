{% macro releaseDateLine(heading, dataQa, releaseDate) %}
    <h3 class="govuk-heading-s">{{ heading }}</h3>
    <p class="govuk-body" data-qa={{ dataQa }}>{{ releaseDate | date('dddd, DD MMMM YYYY') }}</p>
{% endmacro %}

{% macro releaseNoDateLine(heading, dataQa) %}
    <h3 class="govuk-heading-s">{{ heading }}</h3>
    <p class="govuk-body" data-qa={{ dataQa }}></p>
{% endmacro %}

{% macro holidayLine(dataQa, releaseDate, isBankHoliday) %}
    <p class="govuk-body govuk-hint govuk-!-font-size-16"
       data-qa={{ dataQa }}>{{ releaseDate | date('dddd, DD MMMM YYYY') }} when adjusted to a working day</p>
{% endmacro %}

{% macro hdcedBeforePrrdLine(prrd) %}
    <p class="govuk-body govuk-hint govuk-!-font-size-16">Release on HDC must not take place before the PRRD {{ prrd | date('dddd, DD MMMM YYYY') }}</p>
{% endmacro %}

{% macro pedBeforePrrdLine(prrd) %}
    <p class="govuk-body govuk-hint govuk-!-font-size-16">The post recall release date (PRRD) of {{ prrd | date('dddd, DD MMMM YYYY') }} is later than the PED</p>
{% endmacro %}

{% macro pedAdjustedByOtherRelease() %}
    <p class="govuk-body govuk-hint govuk-!-font-size-16">PED adjusted for the {{ model.displayPedAdjustmentHint() }} of a concurrent sentence or default term</p>
{% endmacro %}

{% macro hdcedAdjustedByOtherRelease() %}
    <p class="govuk-body govuk-hint govuk-!-font-size-16">HDCED adjusted for the {{ model.displayHdcedAdjustmentHint() }} of a concurrent sentence or default term</p>
{% endmacro %}

{% macro ersedAdjustedByOtherRelease() %}
    <p class="govuk-body govuk-hint govuk-!-font-size-16">ERSED adjusted for the ARD of a concurrent default term</p>
{% endmacro %}

{% macro ardBeforeMtd() %}
    <p class="govuk-body govuk-hint govuk-!-font-size-16">The Detention and training order (DTO) release date is later than the Automatic Release Date (ARD)</p>
{% endmacro %}

{% macro crdBeforeMtd() %}
    <p class="govuk-body govuk-hint govuk-!-font-size-16">The Detention and training order (DTO) release date is later than the Conditional Release Date (CRD)</p>
{% endmacro %}

{% macro pedBeforeMtd() %}
    <p class="govuk-body govuk-hint govuk-!-font-size-16">The Detention and training order (DTO) release date is later than the Parole Eligibility Date (PED)</p>
{% endmacro %}

{% macro hdcedBeforeMtd() %}
    <p class="govuk-body govuk-hint govuk-!-font-size-16">The Detention and training order (DTO) release date is later than the Home detention curfew eligibility date (HDCED)</p>
{% endmacro %}

{% macro displayMtdHintText() %}
    <p class="govuk-body govuk-hint govuk-!-font-size-16">{{ model.mtdHintText() }}</p>
{% endmacro %}

{% macro ersedAdjustedByMtd() %}
    <p class="govuk-body govuk-hint govuk-!-font-size-16">Adjusted to Mid term date (MTD) of the Detention and training order (DTO)</p>
{% endmacro %}

<div class="custom-card">
    <div class="custom-card-main">
        {% if model.releaseDates.SLED %}
            {{ releaseDateLine('Sentence and licence expiry date (SLED)', 'SLED-date', model.releaseDates.SLED) }}
        {% endif %}
        {% if model.releaseDates.LED %}
            {{ releaseDateLine('Licence expiry date (LED)', 'LED-date', model.releaseDates.LED) }}
        {% endif %}
        {% if model.releaseDates.SED %}
            {{ releaseDateLine('Sentence expiry date (SED)', 'SED-date', model.releaseDates.SED) }}
        {% endif %}
        {% if model.releaseDates.NPD %}
            {{ releaseDateLine('Non parole date (NPD)', 'NPD-date', model.releaseDates.NPD) }}
        {% endif %}
        {% if model.releaseDates.ARD %}
            {{ releaseDateLine('Automatic release date (ARD)', 'ARD-date', model.releaseDates.ARD) }}
            {% if model.weekendAdjustments.ARD %}
                {{ holidayLine('ARD-weekend-adjustment', model.weekendAdjustments.ARD.date, model.weekendAdjustments.ARD.adjustedForBankHoliday) }}
            {% endif %}
            {% if model.displayArdBeforeMtd() %}
                {{ ardBeforeMtd() }}
            {%  endif  %}
        {% endif %}
        {% if model.releaseDates.CRD %}
            {{ releaseDateLine('Conditional release date (CRD)', 'CRD-date', model.releaseDates.CRD) }}
            {% if model.weekendAdjustments.CRD %}
                {{ holidayLine('CRD-weekend-adjustment', model.weekendAdjustments.CRD.date, model.weekendAdjustments.CRD.adjustedForBankHoliday) }}
            {% endif %}
            {% if model.displayCrdBeforeMtd() %}
                {{ crdBeforeMtd() }}
            {%  endif  %}
        {% endif %}
        {% if model.releaseDates.PED %}
            {{ releaseDateLine('Parole eligibility date (PED)', 'PED-date', model.releaseDates.PED) }}
            {% if model.displayPedAdjustmentHint() %}
                {{ pedAdjustedByOtherRelease() }}
            {% endif %}
            {% if model.weekendAdjustments.PED %}
                {{ holidayLine('PED-weekend-adjustment', model.weekendAdjustments.PED.date, model.weekendAdjustments.PED.adjustedForBankHoliday) }}
            {% endif %}
            {% if model.pedBeforePRRD() %}
                {{ pedBeforePrrdLine(model.calculationBreakdown.otherDates.PRRD) }}
            {% endif %}
            {% if model.displayPedBeforeMtd() %}
                {{ pedBeforeMtd() }}
            {%  endif  %}
        {% endif %}
        {% if model.releaseDates.PRRD %}
            {{ releaseDateLine('Post recall release date (PRRD)', 'PRRD-date', model.releaseDates.PRRD) }}
            {% if model.weekendAdjustments.PRRD %}
                {{ holidayLine('PRRD-weekend-adjustment', model.weekendAdjustments.PRRD.date, model.weekendAdjustments.PRRD.adjustedForBankHoliday) }}
            {% endif %}
        {% endif %}
        {% if model.releaseDates.HDCED %}
            {{ releaseDateLine('Home detention curfew eligibility date (HDCED)', 'HDCED-date', model.releaseDates.HDCED) }}
            {% if model.displayHdcedAdjustmentHint() %}
                {{ hdcedAdjustedByOtherRelease() }}
            {% endif %}
            {% if model.weekendAdjustments.HDCED %}
                {{ holidayLine('HDCED-weekend-adjustment', model.weekendAdjustments.HDCED.date, model.weekendAdjustments.HDCED.adjustedForBankHoliday) }}
            {% endif %}
            {% if model.hdcedBeforePRRD() %}
                {{ hdcedBeforePrrdLine(model.calculationBreakdown.otherDates.PRRD) }}
            {% endif %}
            {% if model.displayHdcedBeforeMtd() %}
                {{ hdcedBeforeMtd() }}
            {%  endif  %}
        {% endif %}
        {% if model.releaseDates.ETD %}
            {{ releaseDateLine('Early transfer date (ETD)', 'ETD-date', model.releaseDates.ETD) }}
            {% if model.weekendAdjustments.ETD %}
                {{ holidayLine('ETD-weekend-adjustment', model.weekendAdjustments.ETD.date, model.weekendAdjustments.ETD.adjustedForBankHoliday) }}
            {% endif %}
        {% endif %}
        {% if model.releaseDates.MTD %}
            {{ releaseDateLine('Mid term date (MTD)', 'MTD-date', model.releaseDates.MTD) }}
            {% if model.weekendAdjustments.MTD %}
                {{ holidayLine('MTD-weekend-adjustment', model.weekendAdjustments.MTD.date, model.weekendAdjustments.MTD.adjustedForBankHoliday) }}
            {% endif %}
            {% if model.mtdHintText() %}
                {{ displayMtdHintText() }}
            {% endif %}
        {% endif %}
        {% if model.releaseDates.LTD %}
            {{ releaseDateLine('Late transfer date (LTD)', 'LTD-date', model.releaseDates.LTD) }}
            {% if model.weekendAdjustments.LTD %}
                {{ holidayLine('LTD-weekend-adjustment', model.weekendAdjustments.LTD.date, model.weekendAdjustments.LTD.adjustedForBankHoliday) }}
            {% endif %}

        {% endif %}
        {% if model.releaseDates.TUSED %}
            {{ releaseDateLine('Top up supervision expiry date (TUSED)', 'TUSED-date', model.releaseDates.TUSED) }}
        {% endif %}
        {% if model.releaseDates.ERSED %}
            {{ releaseDateLine('Early removal scheme eligibility date (ERSED)', 'ERSED-date', model.releaseDates.ERSED) }}
            {% if model.displayErsedAdjustmentHint() %}
                {{ ersedAdjustedByOtherRelease() }}
            {% endif %}
            {% if model.ersedAdjustedByMtd() %}
                {{ ersedAdjustedByMtd() }}
            {% endif %}
        {% endif %}
        {% if model.releaseDates.ROTL %}
            {{ releaseDateLine('Release on temporary licence (ROTL)', 'ROTL-date', model.releaseDates.ROTL) }}
        {% endif %}
        {% if model.releaseDates.HDCAD %}
            {{ releaseDateLine('Home detention curfew approved date (HDCAD)', 'HDCAD-date', model.releaseDates.HDCAD) }}
        {% endif %}
        {% if model.releaseDates.DPRRD %}
            {{ releaseDateLine('Detention and training order post recall release date (DPRRD)', 'DPRRD-date', model.releaseDates.DPRRD) }}
        {% endif %}
        {% if model.releaseDates.Tariff %}
            {{ releaseDateLine('Tariff known as the Tariff expiry date in policy documentation', 'Tariff-date', model.releaseDates.Tariff) }}
        {% endif %}
        {% if model.releaseDates.TERSED %}
            {{ releaseDateLine('Tariff-expired removal scheme eligibility date (TERSED)', 'TERSED-date', model.releaseDates.TERSED) }}
        {% endif %}
        {% if model.releaseDates.APD %}
            {{ releaseDateLine('Approved parole date (APD)', 'APD-date', model.releaseDates.APD) }}
        {% endif %}
        {% if model.hasNone %}
            {{ releaseNoDateLine('No dates apply', 'None-date') }}
        {% endif %}
    </div>
</div>