{% from "./courtCaseDetails.njk" import courtCaseDetails %}
{% from "./sentenceTable.njk" import sentenceTable %}
{% from "./sentenceCard.njk" import sentenceCard %}

<p class="govuk-body govuk-!-margin-top-2" id="offence-count-text">
                This calculation will include {{ model.offenceCount }}
        {{ 'sentence' | pluralise(model.offenceCount) }} from NOMIS.
            </p>
<h2 class="govuk-heading-l govuk-!-margin-top-6">Court cases</h2>

<div id="sentences">
        {% for case in model.cases %}
                {{ courtCaseDetails({case: case, includeCaseDetails: true}) }}
                {% if model.edsFeatureToggle %}
                        {{ sentenceCard({
                        case: case,
                        includeCheckboxes: false,
                        includeConcurrentOrConsecutiveText: true,
                        includeSDSPlusBadge: true,
                        sentenceSequenceToSentence: model.sentenceSequenceToSentence,
                        offenceCount: model.offenceCount,
                        returnToCustodyDate: model.returnToCustodyDate,
                        userInputs: model.userInputs,
                        rowIsSdsPlus: model.rowIsSdsPlus,
                        includeSentenceType: true
                        }) 
                }}
                {% else %}
                        {{ sentenceTable({
                        case: case,
                        includeCheckboxes: false,
                        includeConcurrentOrConsecutiveText: true,
                        includeSDSPlusBadge: true,
                        sentenceSequenceToSentence: model.sentenceSequenceToSentence,
                        offenceCount: model.offenceCount,
                        returnToCustodyDate: model.returnToCustodyDate,
                        userInputs: model.userInputs,
                        rowIsSdsPlus: model.rowIsSdsPlus,
                        includeSentenceType: true
                        }) 
                }}
                {% endif %}
        {% endfor %}
</div>

{% set adjustments = model.adjustments %}
{% include "./sentenceAdjustments.njk" %}